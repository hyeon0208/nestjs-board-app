name: âš ï¸ Deploy Production

on:
  workflow_call:

jobs:
  deploy:
    name: ìš´ì˜í™˜ê²½ ë°°í¬
    runs-on: ubuntu-latest
    environment: prod
    steps:
    - name: í™˜ê²½ ì •ë³´ ì¶œë ¥
      run: |
        echo "âš ï¸ ìš´ì˜í™˜ê²½ ë°°í¬ ì‹œì‘"
        echo "í˜„ì¬ ì‹œê°„: $(date)"
        
    - name: Environment Secrets í…ŒìŠ¤íŠ¸
      run: |
        echo "=== Prod Environment Secrets ==="
        if [ -n "$DATABASE_URL" ]; then
          echo "âœ… DATABASE_URL: ì„¤ì •ë¨ (ê¸¸ì´: ${#DATABASE_URL}ì)"
        else
          echo "âŒ DATABASE_URL: ì„¤ì •ë˜ì§€ ì•ŠìŒ"
        fi
        
        if [ -n "$API_KEY" ]; then
          echo "âœ… API_KEY: ì„¤ì •ë¨ (ê¸¸ì´: ${#API_KEY}ì)"
        else
          echo "âŒ API_KEY: ì„¤ì •ë˜ì§€ ì•ŠìŒ"
        fi
      env:
        DATABASE_URL: ${{ secrets.DATABASE_URL }}
        API_KEY: ${{ secrets.API_KEY }}
        
    - name: Environment Variables í…ŒìŠ¤íŠ¸
      run: |
        echo "=== Prod Environment Variables ==="
        echo "LOG_LEVEL: ${{ vars.LOG_LEVEL }}"
        echo "PORT: ${{ vars.PORT }}"
        
    - name: ìš´ì˜í™˜ê²½ ë°°í¬ ì‹œë®¬ë ˆì´ì…˜
      run: |
        echo "ğŸš€ ìš´ì˜ ì„œë²„ ë°°í¬ ì¤‘..."
        sleep 3
        echo "âœ… ìš´ì˜í™˜ê²½ ë°°í¬ ì™„ë£Œ!"