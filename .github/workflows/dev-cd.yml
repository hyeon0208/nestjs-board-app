name: Deploy Application

on:
  workflow_dispatch:
    inputs:
      target_environment:
        description: 'ë°°í¬ í™˜ê²½ ì„ íƒ'
        required: true
        type: environment
      # prod_confirmation í•„ë“œ ì œê±° - Environment ë³´í˜¸ ê·œì¹™ìœ¼ë¡œ ëŒ€ì²´

jobs:
  deploy:
    name: í™˜ê²½ë³„ ë°°í¬
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment: ${{ inputs.target_environment }}  # ì„ íƒëœ í™˜ê²½ ì§ì ‘ ì ìš©
    steps:
    - name: í™˜ê²½ ì •ë³´ ì¶œë ¥
      run: |
        echo "ğŸš€ ë°°í¬ í™˜ê²½: ${{ inputs.target_environment }}"
        echo "ğŸ“ í˜„ì¬ ë¸Œëœì¹˜: ${{ github.ref_name }}"
        
    - name: í™˜ê²½ë³„ ë°°í¬ ë¡œì§
      run: |
        case "${{ inputs.target_environment }}" in
          "development"|"dev")
            echo "ğŸ”§ ê°œë°œí™˜ê²½ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤"
            # ê°œë°œí™˜ê²½ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
            ;;
          "production"|"prod")
            echo "âš ï¸  ìš´ì˜í™˜ê²½ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤"
            # ìš´ì˜í™˜ê²½ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
            ;;
          *)
            echo "ğŸ“¦ ${{ inputs.target_environment }} í™˜ê²½ì— ë°°í¬í•©ë‹ˆë‹¤"
            # ê¸°íƒ€ í™˜ê²½ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
            ;;
        esac